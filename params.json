{"name":"JSON-stat Javascript Toolkit","tagline":"JSON-stat Javascript Toolkit, a library for the JSON-stat format","body":"# JSON-stat\r\n\r\nThe JSON-stat format is a simple lightweight JSON format for data dissemination. It is based in a cube model that arises from the evidence that the most common form of data dissemination is the tabular form. In this cube model, **datasets** are organized in **dimensions**. Dimensions are organized in **categories**.\r\n\r\nThe JSON-stat format is documented at http://json-stat.org/format/.\r\n\r\nThe goal of the JSON-stat Javascript Toolkit (JJT) is to help dealing with JSON-stat responses in Javascript.\r\n\r\n## Design principles\r\n\r\nJSON-stat is based on a data cube information structure. The JSON-stat Javascript Toolkit exposes the data cube as a tree.\r\n\r\n### The JSON-stat tree\r\n\r\n * *Dataset*\r\n   * *Dimension*\r\n     * *Category*\r\n   * *Data*\r\n\r\nFor instance, to retrieve information about the first category of the first dimension of the first dataset in a JSON-stat response *j*, the JSON-stat Javascript Toolkit allows you to traverse the JSON-stat tree like this:\r\n\r\n```js\r\nJSONstat( j ).Dataset( 0 ).Dimension( 0 ).Category( 0 )\r\n```\r\n\r\n### General properties\r\n\r\n * *label*: label of the selected element (string)\r\n * *length*: number of children of the selected element (number).\r\n * *id*: IDs of the children of the selected element (array).\r\n\r\n### Reading and traversing methods\r\n\r\nThese methods (except JSONstat, which is not actually a method) accept a selection argument (ID or index). If it is not provided, an array is returned with the information for every child of the selected element.\r\n\r\n#### JSONstat\r\n\r\nReads a JSON-stat response and creates an internal *jsonstat* object.\r\n\r\n```js\r\nJSONstat( { ... } ).length\r\n//number of datasets in the object\r\n\r\nJSONstat( \"http://json-stat.org/samples/oecd-canada.json\" ).length\r\n//number of datasets in oecd-canada.json. Sync connection.\r\n\r\nJSONstat( \"http://json-stat.org/samples/oecd-canada.json\", \r\n   function(){\r\n      console.log( this.length );\r\n   }\r\n)\r\n//number of datasets in oecd-canada.json. Async connection.\r\n```\r\n\r\n#### Dataset\r\n\r\nSelects a particular dataset in the JSON-stat response.\r\n\r\n```js\r\nJSONstat( j ).Dataset( 0 ).id //IDs of the dimensions in the first dataset\r\n```\r\n\r\n#### Dimension\r\n\r\nSelects a particular dimension in a dataset in the JSON-stat response.\r\n\r\n```js\r\nJSONstat( j ).Dataset( 0 ).Dimension( \"time\" ).label\r\n//Label of the \"time\" dimension in the first dataset\r\n\r\nJSONstat( j ).Dataset( 0 ).Dimension( \"country\" ).role\r\n//Role of the \"country\" dimension in the first dataset\r\n```\r\n\r\n#### Category\r\n\r\nSelects a particular category in a dimension in a dataset in the JSON-stat response.\r\n\r\n```js\r\nJSONstat( j ).Dataset( 0 ).Dimension( \"time\" ).Category( 0 ).label\r\n//Label of the first category of the \"time\" dimension in the first dataset\r\n```\r\n\r\n#### Data\r\n\r\nWhen an argument is passed, selects a single cell of the data cube in the JSON-stat response. If no argument is passed, returns all the cells. In the future this method might be able to select slices (subsets of cells).\r\n\r\nThis method accepts the property \"value\" to get the value of a cell and \"status\" to get its status.\r\n\r\n```js\r\nJSONstat( j ).Dataset( 0 ).Data( 0 ).value\r\n//Value of the first cell (usually a number, but values can be of any type).\r\n\r\nJSONstat( j ).Dataset( 0 ).Data( [ 0,0,0 ] ).value\r\n//Value of the first cell in a dataset with 3 dimensions (usually a number).\r\n\r\nJSONstat( j ).Dataset( 0 ).Data( { \"metric\" : \"UNR\", \"geo\" : \"GR\", \"time\" : \"2014\" } ).value\r\n//Unemployment rate in Greece in 2014 (usually a number).\r\n\r\nJSONstat( j ).Dataset( 0 ).Data( { \"metric\" : \"UNR\", \"geo\" : \"GR\", \"time\" : \"2014\" } ).status\r\n//Status of unemployment rate in Greece in 2014.\r\n```\r\n\r\n### Transformation methods\r\n\r\nTransformation methods get the information at a certain level of the JSON-stat tree and export it to other JSON structure for convenience.\r\n\r\n#### toTable\r\n\r\nThis is a dataset method. It converts the information of a particular dataset into a JSON table. The conversion can be setup using an optional argument.\r\n\r\n```js\r\nJSONstat( j ).Dataset( 0 ).toTable()\r\n//Returns an array of arrays that exposes a tabular structure (rows and columns).\r\n//Useful in many situations. For example, it can be a Google Visualization API input. \r\n\r\nJSONstat( j ).Dataset( 0 ).toTable( { field : \"id\" } )\r\n//Uses ids instead of labels as column names.\r\n\r\nJSONstat( j ).Dataset( 0 ).toTable( { vlabel : \"Valor\", type : \"object\" } )\r\n//Returns an object of arrays (of objects) that exposes a tabular structure (rows and columns)\r\n//in the Google DataTable format (it's the native input format of Google\r\n//Visualization API input). The \"vlabel\" property is instructing the method to use\r\n//\"Valor\" as the label of the values column (instead of \"Value\").\r\n\r\nJSONstat( j ).Dataset( 0 ).toTable( { status : true, slabel : \"Metadata\" } )\r\n//The table will include a status column with label \"Metadata\".\r\n\r\nJSONstat( j ).Dataset( 0 ).toTable( { type : \"arrobj\" } )\r\n//Returns an array of objects where each dimension id is a property, plus a \"value\" property.\r\n\r\nJSONstat( j ).Dataset( 0 ).toTable( { type: \"arrobj\", content: \"id\" } )\r\n//same but category ids (\"AU\") are used instead of labels (\"Australia\") even for content.\r\n\r\nJSONstat( j ).Dataset( \"canada\" ).toTable(\r\n   { type : \"arrobj\", content : \"id\" },\r\n   function( d, i ){\r\n      if ( d.sex === \"F\" && d.concept === \"POP\" ){\r\n         return { age : d.age, population : d.value*1000 };\r\n      }\r\n   }\r\n)\r\n//Get only the female population by age of Canada \r\n//and convert values from thousands to persons.\r\n```\r\n\r\n## Further information\r\n\r\nFor **installation** instructions, code **samples**, the **API reference**, etc., see the **[Wiki](https://github.com/badosa/JSON-stat/wiki)**.\r\n","google":"UA-27240137-1","note":"Don't delete this file! It's used internally to help with page regeneration."}